(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626,11,363],{7030:function(e,r,s){Promise.resolve().then(s.bind(s,6925))},6925:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return AuthForm}});var a=s(6705),t=s(955),l=s(1396),n=s.n(l),i=s(4033),o=s(1865),c=s(8110),m=s(4578),d=s(7368),u=s(1981),p=s(7972),x=s(1295),h=s(6264),f=s(8291),y=s(5925);s(5231),s(470);var g=s(1162),b=(0,g.$)("4b32a21c81275ac8f47c0a92cc517a69ae0413e1"),j=(0,g.$)("9d4fe9d1534caae0c5ab7c7d90c82c156a4ba8e7");(0,g.$)("ad65725efcd8ccf0cebb30f018bb5d9f6750abbb");var w=(0,g.$)("3469b0c2fa054b913aa33b8e405de164aa4b2fe7");let N=m.z.object({email:m.z.string().email("Please enter a valid email address"),password:m.z.string().min(8,"Password must be at least 8 characters")}),v=m.z.object({fullName:m.z.string().min(2,"Please enter your full name"),email:m.z.string().email("Please enter a valid email address"),phone:m.z.string().min(10,"Please enter a valid phone number"),recoveryJourney:m.z.string().max(250,"Please keep your summary under 250 characters"),password:m.z.string().min(8,"Password must be at least 8 characters"),confirmPassword:m.z.string(),termsAccepted:m.z.boolean().refine(e=>!0===e,{message:"You must accept the terms and privacy policy"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),P=m.z.object({email:m.z.string().email("Please enter a valid email address")});function AuthForm(e){let{type:r}=e,s=(0,i.useRouter)();(0,i.useSearchParams)();let[l,m]=(0,t.useState)(!1),[g,k]=(0,t.useState)(null),{register:z,handleSubmit:F,formState:{errors:S}}=(0,o.cI)({resolver:(0,c.F)("login"===r?N:"register"===r?v:P)}),onSubmit=async e=>{m(!0),k(null);try{if("login"===r){let r=new FormData;r.append("email",e.email),r.append("password",e.password);let s=await b(r);(null==s?void 0:s.error)&&(s.error.form?k(s.error.form):y.toast.error("Invalid email or password"))}else if("register"===r){let r=new FormData;r.append("fullName",e.fullName),r.append("email",e.email),r.append("phone",e.phone),r.append("recoveryJourney",e.recoveryJourney||""),r.append("password",e.password);let a=await j(r);(null==a?void 0:a.error)?a.error.form?k(a.error.form):y.toast.error("Registration failed. Please try again."):(null==a?void 0:a.success)&&(y.toast.success("Account created! Please check your email to verify your account."),s.push("/login"))}else if("reset-password"===r){let r=new FormData;r.append("email",e.email);let a=await w(r);(null==a?void 0:a.error)?k(a.error.form):(null==a?void 0:a.success)&&(y.toast.success("Password reset email sent. Please check your inbox."),s.push("/login"))}}catch(e){y.toast.error("An error occurred. Please try again."),console.error(e)}finally{m(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(d.Z,{className:"h-12 w-12 text-primary-600"})}),(0,a.jsx)("h2",{className:"mt-4 text-3xl font-bold text-gray-900",children:(()=>{switch(r){case"login":return"Sign in to your account";case"register":return"Create your account";case"reset-password":return"Reset your password"}})()}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:(()=>{switch(r){case"login":return"Access your client portal and application status";case"register":return"Join Elm Recovery to begin your journey with us";case"reset-password":return"We'll send you a link to reset your password"}})()})]}),g&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{children:g})]}),(0,a.jsxs)("form",{onSubmit:F(onSubmit),className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"space-y-4",children:["register"===r&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"fullName",type:"text",autoComplete:"name",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.fullName?"border-red-500":""),...z("fullName")})]}),S.fullName&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),S.fullName.message]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.email?"border-red-500":""),...z("email")})]}),S.email&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),S.email.message]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"btn btn-primary w-full flex justify-center items-center",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:["login"===r&&"Sign in","register"===r&&"Create account","reset-password"===r&&"Send reset link",(0,a.jsx)(f.Z,{className:"ml-2 h-4 w-4"})]})})}),(0,a.jsxs)("div",{className:"text-sm text-center mt-4",children:["login"===r&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(n(),{href:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign up"})]}),"register"===r&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,a.jsx)(n(),{href:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign in"})]}),"reset-password"===r&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Remember your password?"," ",(0,a.jsx)(n(),{href:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Back to sign in"})]})]})]})]})}}},function(e){e.O(0,[326,196,121,290,744],function(){return e(e.s=7030)}),_N_E=e.O()}]);