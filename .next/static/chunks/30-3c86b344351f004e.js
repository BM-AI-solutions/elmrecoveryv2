(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{7030:function(e,s,r){Promise.resolve().then(r.bind(r,6925))},6925:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return AuthForm}});var a=r(6705),t=r(955),l=r(1396),i=r.n(l),c=r(4033),n=r(1865),o=r(8110),m=r(4578),d=r(7368),x=r(1981),u=r(7972),p=r(1295),h=r(5589),y=r(6264),f=r(8291),g=r(5925);r(5231),r(470);var j=r(1162),b=(0,j.$)("4b32a21c81275ac8f47c0a92cc517a69ae0413e1"),w=(0,j.$)("9d4fe9d1534caae0c5ab7c7d90c82c156a4ba8e7");(0,j.$)("ad65725efcd8ccf0cebb30f018bb5d9f6750abbb");var N=(0,j.$)("3469b0c2fa054b913aa33b8e405de164aa4b2fe7");let v=m.z.object({email:m.z.string().email("Please enter a valid email address"),password:m.z.string().min(8,"Password must be at least 8 characters")}),P=m.z.object({fullName:m.z.string().min(2,"Please enter your full name"),email:m.z.string().email("Please enter a valid email address"),phone:m.z.string().min(10,"Please enter a valid phone number"),recoveryJourney:m.z.string().max(250,"Please keep your summary under 250 characters"),password:m.z.string().min(8,"Password must be at least 8 characters"),confirmPassword:m.z.string(),termsAccepted:m.z.boolean().refine(e=>!0===e,{message:"You must accept the terms and privacy policy"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),k=m.z.object({email:m.z.string().email("Please enter a valid email address")});function AuthForm(e){let{type:s}=e,r=(0,c.useRouter)();(0,c.useSearchParams)();let[l,m]=(0,t.useState)(!1),[j,F]=(0,t.useState)(null),Z="login"===s?v:"register"===s?P:k,{register:A,handleSubmit:z,formState:{errors:S}}=(0,n.cI)({resolver:(0,o.F)(Z)}),onSubmit=async e=>{m(!0),F(null);try{let a;if("login"===s){let s=new FormData;s.append("email",e.email),s.append("password",e.password),a=await b(s)}else if("register"===s){let s=new FormData;s.append("fullName",e.fullName),s.append("email",e.email),s.append("phone",e.phone),s.append("recoveryJourney",e.recoveryJourney||""),s.append("password",e.password),(null==(a=await w(s))?void 0:a.success)&&(g.toast.success("Account created! Please check your email to verify your account."),r.push("/login"))}else if("reset-password"===s){let s=new FormData;s.append("email",e.email),(null==(a=await N(s))?void 0:a.success)&&(g.toast.success("Password reset email sent. Please check your inbox."),r.push("/login"))}(null==a?void 0:a.error)&&(a.error.form?F(a.error.form):g.toast.error("login"===s?"Invalid email or password":"An error occurred. Please try again."))}catch(e){g.toast.error("An error occurred. Please try again."),console.error(e)}finally{m(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(d.Z,{className:"h-12 w-12 text-primary-600"})}),(0,a.jsx)("h2",{className:"mt-4 text-3xl font-bold text-gray-900",children:(()=>{switch(s){case"login":return"Sign in to your account";case"register":return"Create your account";case"reset-password":return"Reset your password"}})()}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:(()=>{switch(s){case"login":return"Access your client portal and application status";case"register":return"Join Elm Recovery to begin your journey with us";case"reset-password":return"We'll send you a link to reset your password"}})()})]}),j&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("form",{onSubmit:z(onSubmit),className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"space-y-4",children:["register"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"fullName",type:"text",autoComplete:"name",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.fullName?"border-red-500":""),...A("fullName")})]}),S.fullName&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.fullName.message]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"phone",type:"tel",autoComplete:"tel",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.phone?"border-red-500":""),...A("phone")})]}),S.phone&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.phone.message]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"recoveryJourney",className:"block text-sm font-medium text-gray-700",children:"Your Recovery Journey (Optional)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("textarea",{id:"recoveryJourney",rows:3,className:"block w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 ".concat(S.recoveryJourney?"border-red-500":""),placeholder:"Tell us a bit about your journey and what you're looking for...",...A("recoveryJourney")})}),S.recoveryJourney&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.recoveryJourney.message]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.email?"border-red-500":""),...A("email")})]}),S.email&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.email.message]})]}),("login"===s||"register"===s)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"password",type:"password",autoComplete:"login"===s?"current-password":"new-password",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.password?"border-red-500":""),...A("password")})]}),S.password&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.password.message]})]}),"register"===s&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",className:"block w-full rounded-md border-gray-300 pl-10 focus:border-primary-500 focus:ring-primary-500 ".concat(S.confirmPassword?"border-red-500":""),...A("confirmPassword")})]}),S.confirmPassword&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.confirmPassword.message]})]}),"register"===s&&(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex items-center h-5",children:(0,a.jsx)("input",{id:"termsAccepted",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded ".concat(S.termsAccepted?"border-red-500":""),...A("termsAccepted")})}),(0,a.jsxs)("div",{className:"ml-3 text-sm",children:[(0,a.jsxs)("label",{htmlFor:"termsAccepted",className:"font-medium text-gray-700",children:["I agree to the"," ",(0,a.jsx)(i(),{href:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,a.jsx)(i(),{href:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]}),S.termsAccepted&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),S.termsAccepted.message]})]})]}),"login"===s&&(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(i(),{href:"/reset-password",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Forgot your password?"})})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"btn btn-primary w-full flex justify-center items-center",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:["login"===s&&"Sign in","register"===s&&"Create account","reset-password"===s&&"Send reset link",(0,a.jsx)(f.Z,{className:"ml-2 h-4 w-4"})]})})}),(0,a.jsxs)("div",{className:"text-sm text-center mt-4",children:["login"===s&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(i(),{href:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign up"})]}),"register"===s&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,a.jsx)(i(),{href:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign in"})]}),"reset-password"===s&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Remember your password?"," ",(0,a.jsx)(i(),{href:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Back to sign in"})]})]})]})]})}}}]);